$(document).ready(function(){var parseUrl=function(e,url){var url=url||location.search;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(url);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}if($('#ajaxCrubModal').length>0&&$('#ajaxCrudModal').length==0){modal=new ModalRemote('#ajaxCrubModal')}else{modal=new ModalRemote('#ajaxCrudModal')}$(document).on('click','[role="modal-remote"]',function(event){event.preventDefault();var id=parseUrl('id',$(this).attr('href'));var columns=$('tr[data-key="'+id+'"]').children('td[data-model-field]');var rowData={id:id};columns.each(function(){if($(this).children().length!=0){rowData[$(this).data('modelField')]=$(this).find('button.kv-editable-value').text()}else{rowData[$(this).data('modelField')]=$(this).text()}})modal.open(this,null,rowData)});$(document).on('click','[role="modal-remote-bulk"]',function(event){event.preventDefault();var selectedIds=[];var selectedData=[];$('input:checkbox[name="selection[]"]').each(function(){if(this.checked){selectedIds.push($(this).val());var columns=$('tr[data-key="'+$(this).val()+'"]').children('td[data-model-field]');var rowData={id:$(this).val()};columns.each(function(){if($(this).children().length!=0){rowData[$(this).data('modelField')]=$(this).find('button.kv-editable-value').text()}else{rowData[$(this).data('modelField')]=$(this).text()}})selectedData.push(rowData)}});if(selectedIds.length==0){if(localStorage.getItem("show-message")=='1'){swal({title:"没有选中",text:'必须要选择项才可以使用此操作.',type:"warning",confirmButtonColor:localStorage.getItem("s-skin-color"),confirmButtonText:"关闭"})}else{toastr.warning('你必须要选择项才可以使用此操作!')}}else{modal.open(this,selectedIds,selectedData)}})});